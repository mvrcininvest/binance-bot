root@vmi2735602:/opt/trading-bot-v91# docker-compose logs trading-bot
trading-bot-v91  | INFO:binance_handler:Successfully connected to Binance Futures (testnet=True)
trading-bot-v91  | INFO:binance_handler:Fetched Exchange Info for 568 symbols
trading-bot-v91  | INFO:binance_handler:Position mode: One-way
trading-bot-v91  | INFO:discord_notifications:Discord notifier v9.1 initialized with enhanced features
trading-bot-v91  | INFO:matplotlib.font_manager:generated new fontManager
trading-bot-v91  | INFO:analytics:🔬 Analytics Engine v9.1 initialized with Hybrid Ultra-Diagnostics
trading-bot-v91  | INFO:__main__:🚀 Starting Trading Bot v9.1...
trading-bot-v91  | INFO:discord_notifications:Discord notifier v9.1 initialized with enhanced features
trading-bot-v91  | INFO:mode_manager:🎯 Mode Manager v9.1 initialized with enhanced features
trading-bot-v91  | INFO:analytics:🔬 Analytics Engine v9.1 initialized with Hybrid Ultra-Diagnostics
trading-bot-v91  | INFO:signal_intelligence:Signal Intelligence v9.1 initialized with enhanced features
trading-bot-v91  | INFO:__main__:🚀 Trading Bot v9.1 initialized with enhanced features
trading-bot-v91  | INFO:__main__:ML Enabled: False
trading-bot-v91  | INFO:__main__:Signal Intelligence: False
trading-bot-v91  | INFO:__main__:Institutional Flow: False
trading-bot-v91  | INFO:__main__:🔄 Starting Trading Bot v9.1...
trading-bot-v91  | INFO:database:Database initialized successfully
trading-bot-v91  | INFO:database:Diagnostic tables created/verified
trading-bot-v91  | INFO:database:Database migrations completed (including diagnostics)
trading-bot-v91  | INFO:__main__:✅ Database initialized successfully
trading-bot-v91  | INFO:__main__:✅ Configuration validated successfully
trading-bot-v91  | INFO:binance_handler:API credentials validated successfully
trading-bot-v91  | INFO:__main__:✅ Binance API credentials validated
trading-bot-v91  | INFO:binance_handler:Async initialization completed
trading-bot-v91  | INFO:__main__:✅ Binance async components initialized
trading-bot-v91  | INFO:ml_predictor:Brak modeli ML - spróbuję wytrenować nowe
trading-bot-v91  | WARNING:ml_predictor:Za mało danych: 0 < 100
trading-bot-v91  | WARNING:ml_predictor:Nie udało się wytrenować modeli ML
trading-bot-v91  | INFO:signal_intelligence:Adaptive mode active: 20/1000 trades
trading-bot-v91  | INFO:signal_intelligence:Signal Intelligence initialized successfully
trading-bot-v91  | INFO:__main__:✅ Adaptive components initialized
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402626150911709244/TVrI2BUGV74ROqOP1A9eVAInlpDPkUC1efRUUul9SKFAFFdsM5mOo47ZfJVc5EZV0U8g?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:✅ Discord Assistant started
trading-bot-v91  | INFO:__main__:✅ Bot started successfully with all v9.1 features
trading-bot-v91  | INFO:     Started server process [1]
trading-bot-v91  | INFO:     Waiting for application startup.
trading-bot-v91  | WARNING:discord.client:PyNaCl is not installed, voice will NOT be supported
trading-bot-v91  | INFO:discord.client:logging in using static token
trading-bot-v91  | INFO:webhook:🚀 Webhook server v9.1 starting up...
trading-bot-v91  | INFO:webhook:✅ Binance credentials detected (IS_TESTNET=True)
trading-bot-v91  | INFO:webhook:✅ Database connection successful
trading-bot-v91  | INFO:webhook:✅ Bot instance available
trading-bot-v91  | INFO:webhook:✅ Webhook server v9.1 ready (Mode: normal)
trading-bot-v91  | INFO:     Application startup complete.
trading-bot-v91  | INFO:     Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)
trading-bot-v91  | INFO:discord_client:Zsynchronizowano 20 komend z serwerem ID: 1402620492518785147
trading-bot-v91  | INFO:discord.gateway:Shard ID None has connected to Gateway (Session ID: 9ceb0706e3a545f90fc2a2c98fba3cd5).
trading-bot-v91  | INFO:discord_client:Strumień logów będzie wysyłany na kanał: 📝-bot-logs
trading-bot-v91  | INFO:discord_client:Discord bot zalogowany jako Mój Asystent Tradingowy#1140
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36364 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1067ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 0809fcf8-672a-4ee7-865d-71cd781ef39e
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1110ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: 0809fcf8-672a-4ee7-865d-71cd781ef39e]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 0809fcf8-672a-4ee7-865d-71cd781ef39e
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36422 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1346ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 0a421db4-df9e-4fda-b1ed-1ded8c59c702
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1366ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - sell [Trace: 0a421db4-df9e-4fda-b1ed-1ded8c59c702]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 0a421db4-df9e-4fda-b1ed-1ded8c59c702
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36428 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | ERROR:database:Failed to log execution trace: (psycopg2.errors.StringDataRightTruncation) value too long for type character varying(10)
trading-bot-v91  |
trading-bot-v91  | [SQL: INSERT INTO execution_traces (trace_id, symbol, action, stage, timestamp, processing_time_ms, status, message, context_data, trade_id, decision_trace_id, created_at) VALUES (%(trace_id)s, %(symbol)s, %(action)s, %(stage)s, %(timestamp)s, %(processing_time_ms)s, %(status)s, %(message)s, %(context_data)s, %(trade_id)s, %(decision_trace_id)s, %(created_at)s) RETURNING execution_traces.id]
trading-bot-v91  | [parameters: {'trace_id': '8d8e51e9-77c5-49b8-8c7d-2afe9ef225ca', 'symbol': 'ETHUSDT.P', 'action': 'emergency_sell', 'stage': 'started', 'timestamp': datetime.datetime(2025, 8, 31, 22, 45, 2, 505997), 'processing_time_ms': 0, 'status': 'running', 'message': 'Started alert_processing', 'context_data': '{"symbol": "ETHUSDT.P", "action": "emergency_sell", "tier": "Emergency", "idempotency_key": "0f53babb8542f6d2820c9def4017b418"}', 'trade_id': None, 'decision_trace_id': None, 'created_at': datetime.datetime(2025, 8, 31, 22, 45, 2, 506027)}]
trading-bot-v91  | (Background on this error at: https://sqlalche.me/e/14/9h9h)
trading-bot-v91  | ERROR:__main__:Error creating diagnostic trace: (psycopg2.errors.StringDataRightTruncation) value too long for type character varying(10)
trading-bot-v91  |
trading-bot-v91  | [SQL: INSERT INTO decision_traces (trace_id, symbol, action, tier, alert_timestamp, processing_stage, final_decision, rejection_reason, position_size_pct, position_size_usdt, leverage_used, leverage_suggested, stop_loss_pct, take_profit_1_pct, take_profit_2_pct, take_profit_3_pct, ml_confidence, risk_score, market_regime, regime_confidence, pine_health_score, atr_percentile, adx_strength, volume_profile_score, processing_time_ms, api_latency_ms, decision_latency_ms, trade_id, alert_history_id, raw_alert_data, decision_context, created_at, completed_at) VALUES (%(trace_id)s, %(symbol)s, %(action)s, %(tier)s, %(alert_timestamp)s, %(processing_stage)s, %(final_decision)s, %(rejection_reason)s, %(position_size_pct)s, %(position_size_usdt)s, %(leverage_used)s, %(leverage_suggested)s, %(stop_loss_pct)s, %(take_profit_1_pct)s, %(take_profit_2_pct)s, %(take_profit_3_pct)s, %(ml_confidence)s, %(risk_score)s, %(market_regime)s, %(regime_confidence)s, %(pine_health_score)s, %(atr_percentile)s, %(adx_strength)s, %(volume_profile_score)s, %(processing_time_ms)s, %(api_latency_ms)s, %(decision_latency_ms)s, %(trade_id)s, %(alert_history_id)s, %(raw_alert_data)s, %(decision_context)s, %(created_at)s, %(completed_at)s) RETURNING decision_traces.id]
trading-bot-v91  | [parameters: {'trace_id': '29db3fa7-7ac5-4c18-8f88-e490df919573', 'symbol': 'ETHUSDT.P', 'action': 'EMERGENCY_SELL', 'tier': 'Emergency', 'alert_timestamp': datetime.datetime(2025, 8, 31, 22, 45, 2, 511463), 'processing_stage': 'received', 'final_decision': 'PROCESSING', 'rejection_reason': None, 'position_size_pct': None, 'position_size_usdt': None, 'leverage_used': None, 'leverage_suggested': None, 'stop_loss_pct': None, 'take_profit_1_pct': None, 'take_profit_2_pct': None, 'take_profit_3_pct': None, 'ml_confidence': None, 'risk_score': None, 'market_regime': None, 'regime_confidence': None, 'pine_health_score': None, 'atr_percentile': None, 'adx_strength': None, 'volume_profile_score': None, 'processing_time_ms': None, 'api_latency_ms': None, 'decision_latency_ms': None, 'trade_id': None, 'alert_history_id': None, 'raw_alert_data': '{"action": "emergency_sell", "symbol": "ETHUSDT.P", "price": 4439.89, "sl": 4461.292569, "tp1": 4430.298688, "tp2": 4419.597403, "tp3": 4408.896118,  ... (572 characters truncated) ... ": null, "alert_id": null, "idempotency_key": "0f53babb8542f6d2820c9def4017b418", "received_at": "2025-08-31T22:45:02.511379", "latency_metrics": {}}', 'decision_context': '{"bot_mode": null, "paused": false, "emergency_mode": false, "active_positions": 0, "daily_pnl": 0.0, "daily_trades": 0}', 'created_at': datetime.datetime(2025, 8, 31, 22, 45, 2, 512874), 'completed_at': None}]
trading-bot-v91  | (Background on this error at: https://sqlalche.me/e/14/9h9h)
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - emergency_sell [Trace: None]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36432 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | ERROR:database:Failed to log execution trace: (psycopg2.errors.StringDataRightTruncation) value too long for type character varying(10)
trading-bot-v91  |
trading-bot-v91  | [SQL: INSERT INTO execution_traces (trace_id, symbol, action, stage, timestamp, processing_time_ms, status, message, context_data, trade_id, decision_trace_id, created_at) VALUES (%(trace_id)s, %(symbol)s, %(action)s, %(stage)s, %(timestamp)s, %(processing_time_ms)s, %(status)s, %(message)s, %(context_data)s, %(trade_id)s, %(decision_trace_id)s, %(created_at)s) RETURNING execution_traces.id]
trading-bot-v91  | [parameters: {'trace_id': '0033b8e1-84c6-40f7-8d0d-5d611dbd99ee', 'symbol': 'BNBUSDT.P', 'action': 'emergency_sell', 'stage': 'started', 'timestamp': datetime.datetime(2025, 8, 31, 22, 50, 3, 343994), 'processing_time_ms': 0, 'status': 'running', 'message': 'Started alert_processing', 'context_data': '{"symbol": "BNBUSDT.P", "action": "emergency_sell", "tier": "Emergency", "idempotency_key": "2eadfdd9e8e3c38f70f0f191d8f7f322"}', 'trade_id': None, 'decision_trace_id': None, 'created_at': datetime.datetime(2025, 8, 31, 22, 50, 3, 344003)}]
trading-bot-v91  | (Background on this error at: https://sqlalche.me/e/14/9h9h)
trading-bot-v91  | ERROR:__main__:Error creating diagnostic trace: (psycopg2.errors.StringDataRightTruncation) value too long for type character varying(10)
trading-bot-v91  |
trading-bot-v91  | [SQL: INSERT INTO decision_traces (trace_id, symbol, action, tier, alert_timestamp, processing_stage, final_decision, rejection_reason, position_size_pct, position_size_usdt, leverage_used, leverage_suggested, stop_loss_pct, take_profit_1_pct, take_profit_2_pct, take_profit_3_pct, ml_confidence, risk_score, market_regime, regime_confidence, pine_health_score, atr_percentile, adx_strength, volume_profile_score, processing_time_ms, api_latency_ms, decision_latency_ms, trade_id, alert_history_id, raw_alert_data, decision_context, created_at, completed_at) VALUES (%(trace_id)s, %(symbol)s, %(action)s, %(tier)s, %(alert_timestamp)s, %(processing_stage)s, %(final_decision)s, %(rejection_reason)s, %(position_size_pct)s, %(position_size_usdt)s, %(leverage_used)s, %(leverage_suggested)s, %(stop_loss_pct)s, %(take_profit_1_pct)s, %(take_profit_2_pct)s, %(take_profit_3_pct)s, %(ml_confidence)s, %(risk_score)s, %(market_regime)s, %(regime_confidence)s, %(pine_health_score)s, %(atr_percentile)s, %(adx_strength)s, %(volume_profile_score)s, %(processing_time_ms)s, %(api_latency_ms)s, %(decision_latency_ms)s, %(trade_id)s, %(alert_history_id)s, %(raw_alert_data)s, %(decision_context)s, %(created_at)s, %(completed_at)s) RETURNING decision_traces.id]
trading-bot-v91  | [parameters: {'trace_id': '632a817e-e63a-4289-bdd4-67098a94160b', 'symbol': 'BNBUSDT.P', 'action': 'EMERGENCY_SELL', 'tier': 'Emergency', 'alert_timestamp': datetime.datetime(2025, 8, 31, 22, 50, 3, 346612), 'processing_stage': 'received', 'final_decision': 'PROCESSING', 'rejection_reason': None, 'position_size_pct': None, 'position_size_usdt': None, 'leverage_used': None, 'leverage_suggested': None, 'stop_loss_pct': None, 'take_profit_1_pct': None, 'take_profit_2_pct': None, 'take_profit_3_pct': None, 'ml_confidence': None, 'risk_score': None, 'market_regime': None, 'regime_confidence': None, 'pine_health_score': None, 'atr_percentile': None, 'adx_strength': None, 'volume_profile_score': None, 'processing_time_ms': None, 'api_latency_ms': None, 'decision_latency_ms': None, 'trade_id': None, 'alert_history_id': None, 'raw_alert_data': '{"action": "emergency_sell", "symbol": "BNBUSDT.P", "price": 864.34, "sl": 865.387062, "tp1": 864.032554, "tp2": 863.509023, "tp3": 862.985492, "brea ... (564 characters truncated) ... ": null, "alert_id": null, "idempotency_key": "2eadfdd9e8e3c38f70f0f191d8f7f322", "received_at": "2025-08-31T22:50:03.346521", "latency_metrics": {}}', 'decision_context': '{"bot_mode": null, "paused": false, "emergency_mode": false, "active_positions": 0, "daily_pnl": 0.0, "daily_trades": 0}', 'created_at': datetime.datetime(2025, 8, 31, 22, 50, 3, 347880), 'completed_at': None}]
trading-bot-v91  | (Background on this error at: https://sqlalche.me/e/14/9h9h)
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - emergency_sell [Trace: None]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36438 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 2895ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: a7ab8178-c9bd-4bfa-99a2-611fe32aef00
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 2943ms for ETHUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 2943ms for ETHUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: a7ab8178-c9bd-4bfa-99a2-611fe32aef00]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: a7ab8178-c9bd-4bfa-99a2-611fe32aef00
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36448 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | ERROR:database:Failed to log execution trace: (psycopg2.errors.StringDataRightTruncation) value too long for type character varying(10)
trading-bot-v91  |
trading-bot-v91  | [SQL: INSERT INTO execution_traces (trace_id, symbol, action, stage, timestamp, processing_time_ms, status, message, context_data, trade_id, decision_trace_id, created_at) VALUES (%(trace_id)s, %(symbol)s, %(action)s, %(stage)s, %(timestamp)s, %(processing_time_ms)s, %(status)s, %(message)s, %(context_data)s, %(trade_id)s, %(decision_trace_id)s, %(created_at)s) RETURNING execution_traces.id]
trading-bot-v91  | [parameters: {'trace_id': '48769b9b-6755-4714-bbd6-2028be7399dc', 'symbol': 'BTCUSDT.P', 'action': 'emergency_sell', 'stage': 'started', 'timestamp': datetime.datetime(2025, 8, 31, 23, 20, 0, 989025), 'processing_time_ms': 0, 'status': 'running', 'message': 'Started alert_processing', 'context_data': '{"symbol": "BTCUSDT.P", "action": "emergency_sell", "tier": "Emergency", "idempotency_key": "4535a8fe8b8e5271a018b3a798845f51"}', 'trade_id': None, 'decision_trace_id': None, 'created_at': datetime.datetime(2025, 8, 31, 23, 20, 0, 989037)}]
trading-bot-v91  | (Background on this error at: https://sqlalche.me/e/14/9h9h)
trading-bot-v91  | ERROR:__main__:Error creating diagnostic trace: (psycopg2.errors.StringDataRightTruncation) value too long for type character varying(10)
trading-bot-v91  |
trading-bot-v91  | [SQL: INSERT INTO decision_traces (trace_id, symbol, action, tier, alert_timestamp, processing_stage, final_decision, rejection_reason, position_size_pct, position_size_usdt, leverage_used, leverage_suggested, stop_loss_pct, take_profit_1_pct, take_profit_2_pct, take_profit_3_pct, ml_confidence, risk_score, market_regime, regime_confidence, pine_health_score, atr_percentile, adx_strength, volume_profile_score, processing_time_ms, api_latency_ms, decision_latency_ms, trade_id, alert_history_id, raw_alert_data, decision_context, created_at, completed_at) VALUES (%(trace_id)s, %(symbol)s, %(action)s, %(tier)s, %(alert_timestamp)s, %(processing_stage)s, %(final_decision)s, %(rejection_reason)s, %(position_size_pct)s, %(position_size_usdt)s, %(leverage_used)s, %(leverage_suggested)s, %(stop_loss_pct)s, %(take_profit_1_pct)s, %(take_profit_2_pct)s, %(take_profit_3_pct)s, %(ml_confidence)s, %(risk_score)s, %(market_regime)s, %(regime_confidence)s, %(pine_health_score)s, %(atr_percentile)s, %(adx_strength)s, %(volume_profile_score)s, %(processing_time_ms)s, %(api_latency_ms)s, %(decision_latency_ms)s, %(trade_id)s, %(alert_history_id)s, %(raw_alert_data)s, %(decision_context)s, %(created_at)s, %(completed_at)s) RETURNING decision_traces.id]
trading-bot-v91  | [parameters: {'trace_id': 'ce8ef051-0fe7-4dc9-96e1-bee3245fea65', 'symbol': 'BTCUSDT.P', 'action': 'EMERGENCY_SELL', 'tier': 'Emergency', 'alert_timestamp': datetime.datetime(2025, 8, 31, 23, 20, 0, 993176), 'processing_stage': 'received', 'final_decision': 'PROCESSING', 'rejection_reason': None, 'position_size_pct': None, 'position_size_usdt': None, 'leverage_used': None, 'leverage_suggested': None, 'stop_loss_pct': None, 'take_profit_1_pct': None, 'take_profit_2_pct': None, 'take_profit_3_pct': None, 'ml_confidence': None, 'risk_score': None, 'market_regime': None, 'regime_confidence': None, 'pine_health_score': None, 'atr_percentile': None, 'adx_strength': None, 'volume_profile_score': None, 'processing_time_ms': None, 'api_latency_ms': None, 'decision_latency_ms': None, 'trade_id': None, 'alert_history_id': None, 'raw_alert_data': '{"action": "emergency_sell", "symbol": "BTCUSDT.P", "price": 108484.2, "sl": 108766.781763, "tp1": 108370.030169, "tp2": 108228.739287, "tp3": 108087 ... (583 characters truncated) ... ": null, "alert_id": null, "idempotency_key": "4535a8fe8b8e5271a018b3a798845f51", "received_at": "2025-08-31T23:20:00.993046", "latency_metrics": {}}', 'decision_context': '{"bot_mode": null, "paused": false, "emergency_mode": false, "active_positions": 0, "daily_pnl": 0.0, "daily_trades": 0}', 'created_at': datetime.datetime(2025, 8, 31, 23, 20, 0, 996437), 'completed_at': None}]
trading-bot-v91  | (Background on this error at: https://sqlalche.me/e/14/9h9h)
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - emergency_sell [Trace: None]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:     172.21.0.5:36448 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 2001ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: d80de4df-e358-426c-9288-5e1eb33d16f6
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 2061ms for BNBUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 2061ms for BNBUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - sell [Trace: d80de4df-e358-426c-9288-5e1eb33d16f6]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: d80de4df-e358-426c-9288-5e1eb33d16f6
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36454 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 7024ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 873f0798-e0d3-4cc3-9765-4b67b6881fa6
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 7049ms for BNBUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 7049ms for BNBUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - sell [Trace: 873f0798-e0d3-4cc3-9765-4b67b6881fa6]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 873f0798-e0d3-4cc3-9765-4b67b6881fa6
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:     172.21.0.5:36458 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1394ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 6bac0a19-c45b-44ce-a47d-5694e6517a7b
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1417ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - sell [Trace: 6bac0a19-c45b-44ce-a47d-5694e6517a7b]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 6bac0a19-c45b-44ce-a47d-5694e6517a7b
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36462 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1148ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: bf7c8e95-b72a-4987-8be1-3cfdb3f92cdd
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1163ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - sell [Trace: bf7c8e95-b72a-4987-8be1-3cfdb3f92cdd]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: bf7c8e95-b72a-4987-8be1-3cfdb3f92cdd
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36468 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1267ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: f57734bb-37e1-47f4-a7b9-35947cd2fdbb
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1281ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - sell [Trace: f57734bb-37e1-47f4-a7b9-35947cd2fdbb]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: f57734bb-37e1-47f4-a7b9-35947cd2fdbb
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36476 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1087ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: bd0036eb-de8f-4a77-ba6e-180a4bda3f3e
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1110ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: bd0036eb-de8f-4a77-ba6e-180a4bda3f3e]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: bd0036eb-de8f-4a77-ba6e-180a4bda3f3e
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36480 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 2066ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 870d0e4d-9ebf-4732-a4cf-d1448c47c5ea
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 2130ms for BNBUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 2130ms for BNBUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - sell [Trace: 870d0e4d-9ebf-4732-a4cf-d1448c47c5ea]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 870d0e4d-9ebf-4732-a4cf-d1448c47c5ea
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:     172.21.0.5:36480 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 2760ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 2d150fdb-d86f-4e43-a88a-71474a7ee8e8
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 2781ms for BTCUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 2781ms for BTCUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - sell [Trace: 2d150fdb-d86f-4e43-a88a-71474a7ee8e8]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 2d150fdb-d86f-4e43-a88a-71474a7ee8e8
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36490 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1854ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 8e6753f6-69a1-4c74-b978-9aa51fb256d6
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1887ms for BNBUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 1887ms for BNBUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - sell [Trace: 8e6753f6-69a1-4c74-b978-9aa51fb256d6]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 8e6753f6-69a1-4c74-b978-9aa51fb256d6
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36494 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 25343769-8a0c-46e3-8134-55888a376df8
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 953ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - sell [Trace: 25343769-8a0c-46e3-8134-55888a376df8]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 25343769-8a0c-46e3-8134-55888a376df8
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:     172.21.0.5:36494 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1143ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: c41546de-801b-4378-bb13-7a64c5b0ea43
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1156ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: c41546de-801b-4378-bb13-7a64c5b0ea43]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: c41546de-801b-4378-bb13-7a64c5b0ea43
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36502 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 2966ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: ad43e355-7499-488e-873b-5f6c88846814
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 2984ms for BNBUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 2984ms for BNBUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - sell [Trace: ad43e355-7499-488e-873b-5f6c88846814]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: ad43e355-7499-488e-873b-5f6c88846814
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36508 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1821ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 13f991a4-fdec-43fa-9338-45e40766f982
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1835ms for BTCUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 1835ms for BTCUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - sell [Trace: 13f991a4-fdec-43fa-9338-45e40766f982]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 13f991a4-fdec-43fa-9338-45e40766f982
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:     172.21.0.5:36508 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 3191ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: d851bd89-6a79-4d0c-8bf2-c6886140e365
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 3204ms for ETHUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 3204ms for ETHUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: d851bd89-6a79-4d0c-8bf2-c6886140e365]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: d851bd89-6a79-4d0c-8bf2-c6886140e365
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36536 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1713ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 67653cb1-5831-44d8-af04-017d8cc50b52
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1763ms for BTCUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 1763ms for BTCUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - sell [Trace: 67653cb1-5831-44d8-af04-017d8cc50b52]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 67653cb1-5831-44d8-af04-017d8cc50b52
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36544 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1483ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 48965b93-337a-41ac-896b-19675fe3a2f2
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1501ms for BTCUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 1501ms for BTCUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - sell [Trace: 48965b93-337a-41ac-896b-19675fe3a2f2]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 48965b93-337a-41ac-896b-19675fe3a2f2
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36548 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1201ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: f6f09a7c-bef5-456a-908a-190c4fbeb4f9
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1217ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - sell [Trace: f6f09a7c-bef5-456a-908a-190c4fbeb4f9]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: f6f09a7c-bef5-456a-908a-190c4fbeb4f9
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36554 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 2060ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 0b2f5389-6af9-47cb-b1c7-b29267e34f15
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 2086ms for ETHUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 2086ms for ETHUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: 0b2f5389-6af9-47cb-b1c7-b29267e34f15]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 0b2f5389-6af9-47cb-b1c7-b29267e34f15
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36558 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1237ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 4dd1ec83-eed9-45ab-9404-3e2e97537b13
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1254ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: 4dd1ec83-eed9-45ab-9404-3e2e97537b13]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 4dd1ec83-eed9-45ab-9404-3e2e97537b13
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:     172.21.0.5:36558 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1592ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 56212b41-7e4a-4da2-8ae7-829b03a099d6
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1605ms for BNBUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 1605ms for BNBUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - sell [Trace: 56212b41-7e4a-4da2-8ae7-829b03a099d6]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 56212b41-7e4a-4da2-8ae7-829b03a099d6
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36562 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | ERROR:database:Failed to log execution trace: (psycopg2.errors.StringDataRightTruncation) value too long for type character varying(10)
trading-bot-v91  |
trading-bot-v91  | [SQL: INSERT INTO execution_traces (trace_id, symbol, action, stage, timestamp, processing_time_ms, status, message, context_data, trade_id, decision_trace_id, created_at) VALUES (%(trace_id)s, %(symbol)s, %(action)s, %(stage)s, %(timestamp)s, %(processing_time_ms)s, %(status)s, %(message)s, %(context_data)s, %(trade_id)s, %(decision_trace_id)s, %(created_at)s) RETURNING execution_traces.id]
trading-bot-v91  | [parameters: {'trace_id': 'f4de0d7d-1547-465a-901f-9622c1e40209', 'symbol': 'BTCUSDT.P', 'action': 'emergency_sell', 'stage': 'started', 'timestamp': datetime.datetime(2025, 9, 1, 2, 30, 1, 625253), 'processing_time_ms': 0, 'status': 'running', 'message': 'Started alert_processing', 'context_data': '{"symbol": "BTCUSDT.P", "action": "emergency_sell", "tier": "Emergency", "idempotency_key": "39371f0c1a65d36886e2bf574db39481"}', 'trade_id': None, 'decision_trace_id': None, 'created_at': datetime.datetime(2025, 9, 1, 2, 30, 1, 625267)}]
trading-bot-v91  | (Background on this error at: https://sqlalche.me/e/14/9h9h)
trading-bot-v91  | ERROR:__main__:Error creating diagnostic trace: (psycopg2.errors.StringDataRightTruncation) value too long for type character varying(10)
trading-bot-v91  |
trading-bot-v91  | [SQL: INSERT INTO decision_traces (trace_id, symbol, action, tier, alert_timestamp, processing_stage, final_decision, rejection_reason, position_size_pct, position_size_usdt, leverage_used, leverage_suggested, stop_loss_pct, take_profit_1_pct, take_profit_2_pct, take_profit_3_pct, ml_confidence, risk_score, market_regime, regime_confidence, pine_health_score, atr_percentile, adx_strength, volume_profile_score, processing_time_ms, api_latency_ms, decision_latency_ms, trade_id, alert_history_id, raw_alert_data, decision_context, created_at, completed_at) VALUES (%(trace_id)s, %(symbol)s, %(action)s, %(tier)s, %(alert_timestamp)s, %(processing_stage)s, %(final_decision)s, %(rejection_reason)s, %(position_size_pct)s, %(position_size_usdt)s, %(leverage_used)s, %(leverage_suggested)s, %(stop_loss_pct)s, %(take_profit_1_pct)s, %(take_profit_2_pct)s, %(take_profit_3_pct)s, %(ml_confidence)s, %(risk_score)s, %(market_regime)s, %(regime_confidence)s, %(pine_health_score)s, %(atr_percentile)s, %(adx_strength)s, %(volume_profile_score)s, %(processing_time_ms)s, %(api_latency_ms)s, %(decision_latency_ms)s, %(trade_id)s, %(alert_history_id)s, %(raw_alert_data)s, %(decision_context)s, %(created_at)s, %(completed_at)s) RETURNING decision_traces.id]
trading-bot-v91  | [parameters: {'trace_id': 'b5daddea-0cad-4c5a-9f41-c807493d5ccc', 'symbol': 'BTCUSDT.P', 'action': 'EMERGENCY_SELL', 'tier': 'Emergency', 'alert_timestamp': datetime.datetime(2025, 9, 1, 2, 30, 1, 634284), 'processing_stage': 'received', 'final_decision': 'PROCESSING', 'rejection_reason': None, 'position_size_pct': None, 'position_size_usdt': None, 'leverage_used': None, 'leverage_suggested': None, 'stop_loss_pct': None, 'take_profit_1_pct': None, 'take_profit_2_pct': None, 'take_profit_3_pct': None, 'ml_confidence': None, 'risk_score': None, 'market_regime': None, 'regime_confidence': None, 'pine_health_score': None, 'atr_percentile': None, 'adx_strength': None, 'volume_profile_score': None, 'processing_time_ms': None, 'api_latency_ms': None, 'decision_latency_ms': None, 'trade_id': None, 'alert_history_id': None, 'raw_alert_data': '{"action": "emergency_sell", "symbol": "BTCUSDT.P", "price": 107652.8, "sl": 107940.942899, "tp1": 107535.64175, "tp2": 107391.570301, "tp3": 107247. ... (581 characters truncated) ... ": null, "alert_id": null, "idempotency_key": "39371f0c1a65d36886e2bf574db39481", "received_at": "2025-09-01T02:30:01.634212", "latency_metrics": {}}', 'decision_context': '{"bot_mode": null, "paused": false, "emergency_mode": false, "active_positions": 0, "daily_pnl": 0.0, "daily_trades": 0}', 'created_at': datetime.datetime(2025, 9, 1, 2, 30, 1, 636508), 'completed_at': None}]
trading-bot-v91  | (Background on this error at: https://sqlalche.me/e/14/9h9h)
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - emergency_sell [Trace: None]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36576 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 3346ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 7a5ef55a-a1d4-4557-8f37-4245eb557965
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 3385ms for BTCUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 3385ms for BTCUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - sell [Trace: 7a5ef55a-a1d4-4557-8f37-4245eb557965]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 7a5ef55a-a1d4-4557-8f37-4245eb557965
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36578 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 10799ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: b6d54d02-9993-46d3-ad2f-9a3982999320
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 10813ms for BNBUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 10813ms for BNBUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - sell [Trace: b6d54d02-9993-46d3-ad2f-9a3982999320]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: b6d54d02-9993-46d3-ad2f-9a3982999320
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:     172.21.0.5:36582 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1784ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 33216b42-8fbf-4559-95db-6e9e830b7213
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1806ms for BTCUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 1806ms for BTCUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - sell [Trace: 33216b42-8fbf-4559-95db-6e9e830b7213]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 33216b42-8fbf-4559-95db-6e9e830b7213
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36588 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 2904ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 4ddc99f5-a310-4d5b-8f5f-491071d9f5e6
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 2924ms for ETHUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 2924ms for ETHUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: 4ddc99f5-a310-4d5b-8f5f-491071d9f5e6]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 4ddc99f5-a310-4d5b-8f5f-491071d9f5e6
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | INFO:     172.21.0.5:36592 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 2735ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 36ada251-4c59-4e60-aa1c-3ffeddedfc4c
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 2756ms for ETHUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 2756ms for ETHUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: 36ada251-4c59-4e60-aa1c-3ffeddedfc4c]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 36ada251-4c59-4e60-aa1c-3ffeddedfc4c
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36596 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: d55fb80c-afcc-47fc-8987-40cd53863aa0
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 808ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: d55fb80c-afcc-47fc-8987-40cd53863aa0]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: d55fb80c-afcc-47fc-8987-40cd53863aa0
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36600 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 2137ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 04f9b537-0a2f-46b2-98cf-37739e647663
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 2161ms for ETHUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 2161ms for ETHUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: 04f9b537-0a2f-46b2-98cf-37739e647663]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 04f9b537-0a2f-46b2-98cf-37739e647663
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:     172.21.0.5:36600 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 5124ms for BNBUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 13b437e8-9e9a-4d70-8846-0743dfdee9ec
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 5137ms for BNBUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 5137ms for BNBUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BNBUSDT.P - sell [Trace: 13b437e8-9e9a-4d70-8846-0743dfdee9ec]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 13b437e8-9e9a-4d70-8846-0743dfdee9ec
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | INFO:     172.21.0.5:36606 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1528ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 95f4a793-f4f9-4474-91a6-ca7c5569f827
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1554ms for ETHUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 1554ms for ETHUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: 95f4a793-f4f9-4474-91a6-ca7c5569f827]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 95f4a793-f4f9-4474-91a6-ca7c5569f827
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36612 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 1950ms for ETHUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 3c84966d-54d8-478f-b4e4-5135299d1eeb
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 1975ms for ETHUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 1975ms for ETHUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - sell [Trace: 3c84966d-54d8-478f-b4e4-5135299d1eeb]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 3c84966d-54d8-478f-b4e4-5135299d1eeb
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36770 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | WARNING:webhook:⚠️ High latency detected: 3952ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 11a4d37b-ae13-4670-b312-88e42e4bd91b
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 3992ms for BTCUSDT.P
trading-bot-v91  | ERROR:__main__:🚨 M5 CRITICAL latency: 3992ms for BTCUSDT.P
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1402990543935373312/J4lKYN25YPPmfU35FPscvggZiZV81LSgUgoRoDdwgE_5dbb5mHU-SvlxW7CxG7Kg7y4T?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - sell [Trace: 11a4d37b-ae13-4670-b312-88e42e4bd91b]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 11a4d37b-ae13-4670-b312-88e42e4bd91b
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | INFO:     172.21.0.5:36782 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | INFO:__main__:🔍 Created diagnostic trace: 4e488f27-b846-4d7d-8abd-d5cc6727d51d
trading-bot-v91  | WARNING:__main__:⚠️ M5 Latency warning: 909ms for BTCUSDT.P
trading-bot-v91  | INFO:__main__:📡 Received signal for BTCUSDT.P - sell [Trace: 4e488f27-b846-4d7d-8abd-d5cc6727d51d]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | INFO:__main__:✅ Completed diagnostic trace: 4e488f27-b846-4d7d-8abd-d5cc6727d51d
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36788 - "POST /webhook/tradingview HTTP/1.1" 200 OK
trading-bot-v91  | ERROR:database:Failed to log execution trace: (psycopg2.errors.StringDataRightTruncation) value too long for type character varying(10)
trading-bot-v91  |
trading-bot-v91  | [SQL: INSERT INTO execution_traces (trace_id, symbol, action, stage, timestamp, processing_time_ms, status, message, context_data, trade_id, decision_trace_id, created_at) VALUES (%(trace_id)s, %(symbol)s, %(action)s, %(stage)s, %(timestamp)s, %(processing_time_ms)s, %(status)s, %(message)s, %(context_data)s, %(trade_id)s, %(decision_trace_id)s, %(created_at)s) RETURNING execution_traces.id]
trading-bot-v91  | [parameters: {'trace_id': '07f6878e-3dd6-46e0-adb3-653134c6a2c0', 'symbol': 'ETHUSDT.P', 'action': 'emergency_sell', 'stage': 'started', 'timestamp': datetime.datetime(2025, 9, 1, 10, 35, 1, 97329), 'processing_time_ms': 0, 'status': 'running', 'message': 'Started alert_processing', 'context_data': '{"symbol": "ETHUSDT.P", "action": "emergency_sell", "tier": "Emergency", "idempotency_key": "23509c747eadbea5ceed4101c0c2569d"}', 'trade_id': None, 'decision_trace_id': None, 'created_at': datetime.datetime(2025, 9, 1, 10, 35, 1, 97340)}]
trading-bot-v91  | (Background on this error at: https://sqlalche.me/e/14/9h9h)
trading-bot-v91  | ERROR:__main__:Error creating diagnostic trace: (psycopg2.errors.StringDataRightTruncation) value too long for type character varying(10)
trading-bot-v91  |
trading-bot-v91  | [SQL: INSERT INTO decision_traces (trace_id, symbol, action, tier, alert_timestamp, processing_stage, final_decision, rejection_reason, position_size_pct, position_size_usdt, leverage_used, leverage_suggested, stop_loss_pct, take_profit_1_pct, take_profit_2_pct, take_profit_3_pct, ml_confidence, risk_score, market_regime, regime_confidence, pine_health_score, atr_percentile, adx_strength, volume_profile_score, processing_time_ms, api_latency_ms, decision_latency_ms, trade_id, alert_history_id, raw_alert_data, decision_context, created_at, completed_at) VALUES (%(trace_id)s, %(symbol)s, %(action)s, %(tier)s, %(alert_timestamp)s, %(processing_stage)s, %(final_decision)s, %(rejection_reason)s, %(position_size_pct)s, %(position_size_usdt)s, %(leverage_used)s, %(leverage_suggested)s, %(stop_loss_pct)s, %(take_profit_1_pct)s, %(take_profit_2_pct)s, %(take_profit_3_pct)s, %(ml_confidence)s, %(risk_score)s, %(market_regime)s, %(regime_confidence)s, %(pine_health_score)s, %(atr_percentile)s, %(adx_strength)s, %(volume_profile_score)s, %(processing_time_ms)s, %(api_latency_ms)s, %(decision_latency_ms)s, %(trade_id)s, %(alert_history_id)s, %(raw_alert_data)s, %(decision_context)s, %(created_at)s, %(completed_at)s) RETURNING decision_traces.id]
trading-bot-v91  | [parameters: {'trace_id': 'f10e0dae-876d-4d25-a900-470ca4f6b172', 'symbol': 'ETHUSDT.P', 'action': 'EMERGENCY_SELL', 'tier': 'Emergency', 'alert_timestamp': datetime.datetime(2025, 9, 1, 10, 35, 1, 100461), 'processing_stage': 'received', 'final_decision': 'PROCESSING', 'rejection_reason': None, 'position_size_pct': None, 'position_size_usdt': None, 'leverage_used': None, 'leverage_suggested': None, 'stop_loss_pct': None, 'take_profit_1_pct': None, 'take_profit_2_pct': None, 'take_profit_3_pct': None, 'ml_confidence': None, 'risk_score': None, 'market_regime': None, 'regime_confidence': None, 'pine_health_score': None, 'atr_percentile': None, 'adx_strength': None, 'volume_profile_score': None, 'processing_time_ms': None, 'api_latency_ms': None, 'decision_latency_ms': None, 'trade_id': None, 'alert_history_id': None, 'raw_alert_data': '{"action": "emergency_sell", "symbol": "ETHUSDT.P", "price": 4414.77, "sl": 4440.288417, "tp1": 4403.114484, "tp2": 4390.355275, "tp3": 4377.596067,  ... (574 characters truncated) ... ": null, "alert_id": null, "idempotency_key": "23509c747eadbea5ceed4101c0c2569d", "received_at": "2025-09-01T10:35:01.100406", "latency_metrics": {}}', 'decision_context': '{"bot_mode": null, "paused": false, "emergency_mode": false, "active_positions": 0, "daily_pnl": 0.0, "daily_trades": 0}', 'created_at': datetime.datetime(2025, 9, 1, 10, 35, 1, 101653), 'completed_at': None}]
trading-bot-v91  | (Background on this error at: https://sqlalche.me/e/14/9h9h)
trading-bot-v91  | INFO:__main__:📡 Received signal for ETHUSDT.P - emergency_sell [Trace: None]
trading-bot-v91  | INFO:mode_manager:📉 Weak institutional flow (0.00) - reduced position size
trading-bot-v91  | INFO:mode_manager:📊 Trade parameters for emergency mode: {'leverage': 1, 'position_size_multiplier': 0.2, 'stop_loss_multiplier': 0.5, 'emergency_mode': True, 'risk_percent': 0.25}
trading-bot-v91  | ERROR:__main__:💥 Error handling signal: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  | ERROR:webhook:Failed to process alert: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/main.py", line 809, in handle_signal
trading-bot-v91  |     optimized_params = await self.decision_engine.optimize_parameters(
trading-bot-v91  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | AttributeError: 'DecisionEngine' object has no attribute 'optimize_parameters'
trading-bot-v91  |
trading-bot-v91  | During handling of the above exception, another exception occurred:
trading-bot-v91  |
trading-bot-v91  | Traceback (most recent call last):
trading-bot-v91  |   File "/app/webhook.py", line 512, in process_alert_async
trading-bot-v91  |     decision = await bot.handle_signal(alert_dict)
trading-bot-v91  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  |   File "/app/main.py", line 880, in handle_signal
trading-bot-v91  |     await self.discord.send_error_notification(f"Signal handling error: {e}")
trading-bot-v91  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
trading-bot-v91  | TypeError: DiscordNotifier.send_error_notification() missing 1 required positional argument: 'error_message'
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:webhook:Validation error: 1 validation error for AlertPayloadV91
trading-bot-v91  | version
trading-bot-v91  |   Field required [type=missing, input_value={'action': 'buy', 'symbol..._time': '1756729800000'}, input_type=dict]
trading-bot-v91  |     For further information visit https://errors.pydantic.dev/2.5/v/missing
trading-bot-v91  | INFO:     172.21.0.5:36840 - "POST /webhook/tradingview HTTP/1.1" 400 Bad Request
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:     172.21.0.5:36844 - "POST /webhook/tradingview HTTP/1.1" 400 Bad Request
trading-bot-v91  | ERROR:webhook:Validation error: 1 validation error for AlertPayloadV91
trading-bot-v91  | version
trading-bot-v91  |   Field required [type=missing, input_value={'action': 'buy', 'symbol..._time': '1756730100000'}, input_type=dict]
trading-bot-v91  |     For further information visit https://errors.pydantic.dev/2.5/v/missing
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:webhook:Validation error: 1 validation error for AlertPayloadV91
trading-bot-v91  | version
trading-bot-v91  |   Field required [type=missing, input_value={'action': 'buy', 'symbol..._time': '1756730400000'}, input_type=dict]
trading-bot-v91  |     For further information visit https://errors.pydantic.dev/2.5/v/missing
trading-bot-v91  | INFO:     172.21.0.5:36848 - "POST /webhook/tradingview HTTP/1.1" 400 Bad Request
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:webhook:Validation error: 1 validation error for AlertPayloadV91
trading-bot-v91  | version
trading-bot-v91  |   Field required [type=missing, input_value={'action': 'buy', 'symbol..._time': '1756732800000'}, input_type=dict]
trading-bot-v91  |     For further information visit https://errors.pydantic.dev/2.5/v/missing
trading-bot-v91  | INFO:     172.21.0.5:36866 - "POST /webhook/tradingview HTTP/1.1" 400 Bad Request
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:discord.gateway:Shard ID None has successfully RESUMED session 9ceb0706e3a545f90fc2a2c98fba3cd5.
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:webhook:Validation error: 1 validation error for AlertPayloadV91
trading-bot-v91  | version
trading-bot-v91  |   Field required [type=missing, input_value={'action': 'buy', 'symbol..._time': '1756736100000'}, input_type=dict]
trading-bot-v91  |     For further information visit https://errors.pydantic.dev/2.5/v/missing
trading-bot-v91  | INFO:     172.21.0.5:36892 - "POST /webhook/tradingview HTTP/1.1" 400 Bad Request
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:database:Cleaned up 0 alerts and 0 performance records
trading-bot-v91  | INFO:__main__:🧹 Cleanup completed. Removed 0 expired position guards
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | INFO:httpx:HTTP Request: POST https://discord.com/api/webhooks/1405478101642903593/PV6Hp9LHUOQ0m0mwkp74olG5-D_IPlWC_Kq52gO-NJZUWqHdKBZEwbAj7B_nPVPXqlK0?wait=true "HTTP/1.1 200 OK"
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
trading-bot-v91  | ERROR:__main__:Error in pattern detection: name 'DecisionTrace' is not defined
trading-bot-v91  | INFO:database:Diagnostic cleanup: 0 traces, 0 params, 0 pine logs, 0 SHAP, 0 patterns, 0 health records
root@vmi2735602:/opt/trading-bot-v91#
